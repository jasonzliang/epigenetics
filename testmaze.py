#!/usr/bin/python

import maze_lib
import numpy as np
# np.set_printoptions(precision=4, suppress=True, formatter={'all':lambda x: str(x) + ','})

genome = np.array([4.16819316123, 3.33440481504, -0.0802418871521, -1.40856363046,
 -2.6784101657, -3.0385784061, -5.20714799426, 3.78842858875,
 1.81526339715, -3.12859095298, -2.20064827924, -1.17504993901,
 -5.77583506553, -0.922572573795, 2.93299794594, 0.622772475383,
 -0.773136838143, -0.16938184452, -3.4635575828, 0.241192565517,
 7.47957465942, 4.83627543554, -0.18819119881, 4.96620461988,
 3.69905415958, -1.12682906493, -2.08187159156, 2.84711826064,
 -3.78752967889, -0.315294280624, -1.51496394885, -2.70315995586,
 -0.113694128569, 0.324833700812, 1.5444486471, 2.92984616608,
 3.68397304042, -4.29659294993, 3.49110629862, -1.17732483603,
 0.0971221908958, -1.21626421253, -1.41189688753, -2.57177947036,
 -4.17617604378, 2.93769505506, 2.57205476361, -2.25087649587,
 4.8363016765, -0.730630975138, 0.835826928058, -4.68498740342,
 -1.25486558727, 3.48429676238, 0.227313509694, -0.754315428818,
 4.74378562535, 2.52807270955, 0.612690390468, 0.0719984558763,
 4.24638615648, -1.9088679563, 0.881892347059, 1.06711072032,
 -1.52215889348, 0.749815412196, -2.1490568454, 1.02479694228,
 -1.92561324364, -2.35052380636, 3.68593941502, 2.74127074642,
 -3.07440827718, -3.6756916527, 4.72689874117, 1.33738263482,
 2.36205176771, -4.2460908586, 1.08623080539, 0.272831628084,
 4.97886269308, -2.49029610913, -0.112136932568, 4.45674728529,
 3.10442074898, 2.37145037605, 0.0681250101247, -5.83220099746,
 0.825535764806, -2.40454298093, -0.900222609745, 1.1587729906,
 3.91233075142, 1.06928760111, 2.13417488595, 1.43303980611,
 -2.52991870234, 3.79657004822, -0.843024876184, 0.64002105423,
 2.39915382112, 3.71736526456, 1.2351749243, -1.25166518786, 3.39722723043,
 0.154249551065, 5.62451533875, 1.26829382686, -0.0164186170238,
 4.59929098903, 4.15484684041, -3.24130595321, 1.67385340769,
 -0.0768528015376, 3.30827969658, 0.252813764182, -3.1186583042,
 0.719032055035, 8.37923427723, -1.33990105755, 4.99944515045,
 -0.697986726044, 4.7690228308, 2.13605796017, -2.94866179456,
 -1.49348692337, -3.03381794835, -2.13893868033, 4.15066780873,
 2.8368773478, -2.72468890423, 0.8926259982, -1.47410064982, 5.91757724911,
 -0.566894393869, 4.62331982385, -1.49509061056, -4.60606664892,
 1.78248017688, 0.346030756932, 3.48303970353, 3.69259632858,
 1.05527864603, -1.94146440024, -2.59504629868, 2.35720488842,
 1.73459244306, -0.653399450677, 3.80356328759, 1.18970628939,
 -0.48667279496, 1.74755157983, 0.761184657594, 3.23625658368,
 -4.12686411405, -10.3463256479, -2.08094985124, -4.23071021003,
 3.10050426663, -4.9456181199, -1.02077016124, -2.60475685313,
 -7.32819302708, 5.77313159823, -1.62431391529, 1.04479003843,
 0.871094584941, -0.190371733524,])
print genome.dtype, genome.shape
ac = np.ones(8) * 0.00001
print ac.dtype
maze_lib.SetUp(False, True)
maze_lib.SetVerbosity(True)

fitness = maze_lib.EvalNetwork(genome, ac)
print fitness

import matplotlib.pyplot as plt
from matplotlib import collections as mc

lines = [
[(293, 7), (289, 130)],
[(289, 130), (6, 134)],
[(6, 134), (8, 5)],
[(8, 5), (292, 7)],
[(241, 130), (58, 65)],
[(114, 7), (73, 42)],
[(130, 91), (107, 46)],
[(196, 8), (139, 51)],
[(219, 122), (182, 63)],
[(267, 9), (214, 63)],
[(271, 129), (237, 88)]
]


lc = mc.LineCollection(lines, linewidths=2)
fig, ax = plt.subplots()
ax.add_collection(lc)
ax.scatter(270, 100)
ax.scatter(197.786, 123.179, c="red")
ax.scatter(30, 22, c="green")
ax.autoscale()
ax.margins(0.1)
plt.show()